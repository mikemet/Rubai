@page "/"

<PageTitle>Главная</PageTitle>

<div class="container">

    <img src="/images/khayyam.png" alt=""/>

    <div>
        <span><i>Ома́р Хайя́м Нишапури́</i></span>
        <strong><i>(перс. عُمَر خَیّام نیشابوری‎; 18 мая 1048, Нишапур — 4 декабря 1131, там же) персидский философ, математик, астроном и поэт.</i></strong>
    </div>

    <div class="rubai">
        @foreach (var item in rubai)
        {
            <p>@item.ToString()<br /></p>
        }
    </div>

    <button class="btn btn-primary" @onclick="GetRubai">Выбор</button>
</div>

@code {
    string[] arr = File.ReadAllLines("Data/rubai.csv");
    List<string> lst = new List<string>();
    List<string> rubai = new List<string>()
    {
        "Если я согрешил - то не сам по себе,",
        "Путь земной совершил я не сам по себе,",
        "Где я был? Кто я был? Жил впотьмах, исполняя",
        "Все, что Он предрешил, а не сам по себе.",
    };

    Random rnd = new Random();
    int mIndex;

    private void GetRubai()
    {
        lst = arr.ToList();
        mIndex = rnd.Next(lst.Count);

        if (mIndex >= mIndex - 3)
        {
            mIndex = mIndex - 4;
        }

        while (mIndex % 4 != 0)
        {
            mIndex++;
        }

        rubai.Clear();
        rubai.Add(lst[mIndex]);
        mIndex++;
        for (int i = 0; i < 3; i++)
        {
            rubai.Add(lst[mIndex]);
            mIndex++;
        }
    }
}